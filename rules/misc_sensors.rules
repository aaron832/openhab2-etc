rule "nodeReqlcddisplaytime_rule"
when
        Item nodeReqlcddisplaytime received command
then
		logInfo("rules","forward to nodeSndlcddisplaytime")
        nodeSndlcddisplaytime.sendCommand( new DecimalType(now.minusHours(8).millis/1000) )
        //nodeSndlcddisplaytime.sendCommand( ((CurrentTime.state as DateTimeType).calendar.timeInMillis)/1000 )
end

rule "sensorLoveLastCom_rule"
when
        Item nodeReqLove01 received command
or
        Item nodeReqLoveSleep received command
then
        sensorLoveLastCom.postUpdate( new DateTimeType() )
end

rule "nodeReqLove01_rule"
when
	Item nodeReqLove01 received command
then
	if(global_love_switch.state == ON) {
		logInfo("rules","forward to nodeReqLove01")
		relayLove01.sendCommand(receivedCommand)
		global_love_switch.postUpdate(OFF)
	}
	else if(global_lovedoorbell_drivewayactivate_switch.state == ON) {
		logInfo("rules","forward to relayLoveCustom")
		//0x90,60, 0,250, 0x90,72, 0,250, 0x80, 0xf0
		//var testinput = "\u003C\u0048"
		var testinput = "\u0050\u0050\u0050"
		relayLoveCustom.sendCommand(testinput) 
		global_lovedoorbell_drivewayactivate_switch.postUpdate(OFF)
	}
end

rule "nodeReqLoveSleep_rule"
when
	Item nodeReqLoveSleep received command
then
	logInfo("rules","forward to relayLoveSleep")
	//relayLoveSleep.sendCommand(new DecimalType(300000))
	//relayLoveSleep.sendCommand(new DecimalType(60000))
	relayLoveSleep.sendCommand(new DecimalType(10000))
end

rule "nodeReqlcdtop_rule"
when
	Item nodeReqlcdtop received command or
	Item nodelcdtop received command
then
	logInfo("rules","forward to nodeSndlcdtop")

	if(nodelcdtop.state == NULL) {
		logInfo("rules","setting default for nodelcdtop")
		nodelcdtop.postUpdate(new StringType("OpenHab"))
		Thread::sleep(200)
	}

	logInfo("rules","Sending top: " + nodelcdtop.state.toString)
	nodeSndlcdtop.sendCommand(nodelcdtop.state.toString)
end

rule "nodeReqlcdbottom_rule"
when
	Item nodeReqlcdbottom received command or
	Item nodelcdbottom received command
then
	logInfo("rules","forward to nodeSndlcdbottom")

	if(nodelcdbottom.state == NULL) {
		logInfo("rules","setting default for nodelcdbottom")
		nodelcdbottom.postUpdate(new StringType("OpenHab Connect"))
		Thread::sleep(200)
	}

	logInfo("rules","Sending bottom: " + nodelcdbottom.state.toString)
	nodeSndlcdbottom.sendCommand(nodelcdbottom.state.toString)
end

rule "nodeReqlcdbright_rule"
when
	Item nodeReqlcdbright received command or
	Item nodelcdbright received command
then
	logInfo("rules","forward to nodeSndlcdbright")

	if(nodelcdbright.state == NULL) {
		logInfo("rules","setting default for nodelcdbright")
		nodelcdbright.postUpdate(new DecimalType(0))
		Thread::sleep(200)
	}
	nodeSndlcdbright.sendCommand(nodelcdbright.state as DecimalType)
end

rule "nodeLCDButtonMid_rule"
when
	Item nodeLCDButtonMid received command
then
	global_alarm.sendCommand(ON)
end

rule "nodeLCDButtonRight_rule"
when
	Item nodeLCDButtonRight received command
then
	global_alarm.sendCommand(OFF)
end
